"use strict";(self.webpackChunklazone_learning_path=self.webpackChunklazone_learning_path||[]).push([[6992],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,u=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,f=d["".concat(u,".").concat(m)]||d[m]||p[m]||l;return n?a.createElement(f,o(o({ref:t},c),{},{components:n})):a.createElement(f,o({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[d]="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5124:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const l={},o="Hooks avanc\xe9s et Projet To\u2011Do",i={unversionedId:"fullstack-learning-path/module-0-react-fondamentaux/hooks-avances-todo",id:"fullstack-learning-path/module-0-react-fondamentaux/hooks-avances-todo",title:"Hooks avanc\xe9s et Projet To\u2011Do",description:"Objectifs d'apprentissage",source:"@site/docs/fullstack-learning-path/module-0-react-fondamentaux/03-hooks-avances-todo.md",sourceDirName:"fullstack-learning-path/module-0-react-fondamentaux",slug:"/fullstack-learning-path/module-0-react-fondamentaux/hooks-avances-todo",permalink:"/lazone-training-path-docs/en/docs/next/fullstack-learning-path/module-0-react-fondamentaux/hooks-avances-todo",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/fullstack-learning-path/module-0-react-fondamentaux/03-hooks-avances-todo.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Ma\xeetrise du State et des Effets",permalink:"/lazone-training-path-docs/en/docs/next/fullstack-learning-path/module-0-react-fondamentaux/state-effets"},next:{title:"Module 1: Fondamentaux et environnement de d\xe9veloppement",permalink:"/lazone-training-path-docs/en/docs/next/category/module-1-fondamentaux-et-environnement-de-d\xe9veloppement"}},u={},s=[{value:"Objectifs d&#39;apprentissage",id:"objectifs-dapprentissage",level:2},{value:"Concepts cl\xe9s",id:"concepts-cl\xe9s",level:2},{value:"useRef: r\xe9f\xe9rence DOM et valeur mutable",id:"useref-r\xe9f\xe9rence-dom-et-valeur-mutable",level:3},{value:"useCallback: m\xe9morisation de fonctions",id:"usecallback-m\xe9morisation-de-fonctions",level:3},{value:"Projet guid\xe9: Application To\u2011Do",id:"projet-guid\xe9-application-todo",level:2},{value:"Contr\xf4le",id:"contr\xf4le",level:2},{value:"Voir aussi",id:"voir-aussi",level:2},{value:"R\xe9f\xe9rences",id:"r\xe9f\xe9rences",level:2}],c={toc:s},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"hooks-avanc\xe9s-et-projet-todo"},"Hooks avanc\xe9s et Projet To\u2011Do"),(0,r.kt)("h2",{id:"objectifs-dapprentissage"},"Objectifs d'apprentissage"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Utiliser ",(0,r.kt)("inlineCode",{parentName:"li"},"useRef")," pour r\xe9f\xe9rencer un \xe9l\xe9ment DOM et stocker des valeurs mutables persist\xe9es entre rendus"),(0,r.kt)("li",{parentName:"ul"},"Utiliser ",(0,r.kt)("inlineCode",{parentName:"li"},"useCallback")," pour m\xe9moriser des callbacks d\xe9pendants et r\xe9duire les re-rendus inutiles"),(0,r.kt)("li",{parentName:"ul"},"Structurer une petite application To\u2011Do r\xe9utilisable et testable")),(0,r.kt)("h2",{id:"concepts-cl\xe9s"},"Concepts cl\xe9s"),(0,r.kt)("h3",{id:"useref-r\xe9f\xe9rence-dom-et-valeur-mutable"},"useRef: r\xe9f\xe9rence DOM et valeur mutable"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useRef")," retourne un objet stable ",(0,r.kt)("inlineCode",{parentName:"p"},"{ current: T }")," qui persiste entre rendus sans provoquer de re-rendu quand ",(0,r.kt)("inlineCode",{parentName:"p"},"current")," change."),(0,r.kt)("p",null,"Cas d\u2019usage:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Focus d\u2019un champ input apr\xe8s ajout."),(0,r.kt)("li",{parentName:"ul"},"Stocker un identifiant incr\xe9mental, un timer, ou la derni\xe8re valeur.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useRef, useState } from "react"\n\nexport default function FocusInput() {\n  const inputRef = useRef<HTMLInputElement | null>(null)\n  const [value, setValue] = useState("")\n\n  function focus() {\n    inputRef.current?.focus()\n  }\n\n  return (\n    <div>\n      <input ref={inputRef} value={value} onChange={(e) => setValue(e.target.value)} />\n      <button onClick={focus}>Focus</button>\n    </div>\n  )\n}\n')),(0,r.kt)("h3",{id:"usecallback-m\xe9morisation-de-fonctions"},"useCallback: m\xe9morisation de fonctions"),(0,r.kt)("p",null,"\xc0 chaque re-rendu, les fonctions sont recr\xe9\xe9es. ",(0,r.kt)("inlineCode",{parentName:"p"},"useCallback(fn, deps)")," renvoie la m\xeame r\xe9f\xe9rence entre rendus si les d\xe9pendances n\u2019ont pas chang\xe9."),(0,r.kt)("p",null,"Cas d\u2019usage:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Passer un handler \xe0 un composant m\xe9mo\xefs\xe9 pour \xe9viter sa re-rendu."),(0,r.kt)("li",{parentName:"ul"},"Stabiliser les d\xe9pendances d\u2019un effet ou d\u2019un memo.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useCallback, useState } from "react"\n\nfunction List({ onSelect }: { onSelect: (id: string) => void }) {\n  // ... rend une liste et appelle onSelect(id)\n  return null\n}\n\nexport default function Container() {\n  const [selected, setSelected] = useState<string | null>(null)\n\n  const handleSelect = useCallback((id: string) => {\n    setSelected(id)\n  }, [])\n\n  return <List onSelect={handleSelect} />\n}\n')),(0,r.kt)("p",null,"Pi\xe8ges:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"M\xe9moriser un callback inutilement n\u2019apporte rien et peut compliquer le code."),(0,r.kt)("li",{parentName:"ul"},"Oublier des d\xe9pendances m\xe8ne \xe0 des valeurs obsol\xe8tes (stale closures). D\xe9clarer toutes les d\xe9pendances.")),(0,r.kt)("h2",{id:"projet-guid\xe9-application-todo"},"Projet guid\xe9: Application To\u2011Do"),(0,r.kt)("p",null,"Sp\xe9cifications:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Saisir une t\xe2che via un input; Enter ou bouton pour ajouter."),(0,r.kt)("li",{parentName:"ul"},"Focus revenir sur l\u2019input apr\xe8s ajout."),(0,r.kt)("li",{parentName:"ul"},"Lister les t\xe2ches avec une ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," stable."),(0,r.kt)("li",{parentName:"ul"},"Supprimer une t\xe2che."),(0,r.kt)("li",{parentName:"ul"},"\xc9viter des re-rendus superflus via ",(0,r.kt)("inlineCode",{parentName:"li"},"useCallback"),".")),(0,r.kt)("p",null,"Structure sugg\xe9r\xe9e:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useCallback, useMemo, useRef, useState } from "react"\n\ntype Todo = { id: string; title: string }\n\nfunction TodoItem({ todo, onRemove }: { todo: Todo; onRemove: (id: string) => void }) {\n  return (\n    <li>\n      {todo.title}\n      <button onClick={() => onRemove(todo.id)}>Supprimer</button>\n    </li>\n  )\n}\n\nexport default function TodoApp() {\n  const [todos, setTodos] = useState<Todo[]>([])\n  const [title, setTitle] = useState("")\n  const inputRef = useRef<HTMLInputElement | null>(null)\n  const seqRef = useRef(0) // identifiant incr\xe9mental persistant\n\n  const add = useCallback(() => {\n    if (!title.trim()) return\n    const id = String(++seqRef.current)\n    setTodos((prev) => [...prev, { id, title: title.trim() }])\n    setTitle("")\n    inputRef.current?.focus()\n  }, [title])\n\n  const remove = useCallback((id: string) => {\n    setTodos((prev) => prev.filter((t) => t.id !== id))\n  }, [])\n\n  const canAdd = useMemo(() => title.trim().length > 0, [title])\n\n  function onKeyDown(e: React.KeyboardEvent<HTMLInputElement>) {\n    if (e.key === "Enter" && canAdd) add()\n  }\n\n  return (\n    <div>\n      <input ref={inputRef} value={title} onChange={(e) => setTitle(e.target.value)} onKeyDown={onKeyDown} />\n      <button onClick={add} disabled={!canAdd}>Ajouter</button>\n      <ul>\n        {todos.map((t) => (\n          <TodoItem key={t.id} todo={t} onRemove={remove} />\n        ))}\n      </ul>\n    </div>\n  )\n}\n')),(0,r.kt)("p",null,"Points d\u2019attention:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"seqRef")," ne provoque pas de re-rendu: id\xe9al pour compteurs/ids."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"add")," et ",(0,r.kt)("inlineCode",{parentName:"li"},"remove")," sont m\xe9mo\xefs\xe9s; leurs d\xe9pendances sont explicites."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"key={t.id}")," et non ",(0,r.kt)("inlineCode",{parentName:"li"},"index"),".")),(0,r.kt)("h2",{id:"contr\xf4le"},"Contr\xf4le"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Expliquer la diff\xe9rence entre ",(0,r.kt)("inlineCode",{parentName:"li"},"useRef")," et ",(0,r.kt)("inlineCode",{parentName:"li"},"useState")," et quand choisir l\u2019un ou l\u2019autre."),(0,r.kt)("li",{parentName:"ul"},"Identifier les d\xe9pendances correctes pour ",(0,r.kt)("inlineCode",{parentName:"li"},"useCallback")," dans le projet To\u2011Do."),(0,r.kt)("li",{parentName:"ul"},"Revue: v\xe9rifier immutabilit\xe9, cl\xe9s stables, focus via ref, handlers m\xe9mo\xefs\xe9s.")),(0,r.kt)("h2",{id:"voir-aussi"},"Voir aussi"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/lazone-training-path-docs/en/docs/next/fullstack-learning-path/module-2/methodes-rendu-nextjs"},"Ma\xeetriser les m\xe9thodes de rendu")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/lazone-training-path-docs/en/docs/next/fullstack-learning-path/module-3-architecture-etat-global/reutilisabilite-architecture"},"R\xe9utilisabilit\xe9 et Architecture"))),(0,r.kt)("h2",{id:"r\xe9f\xe9rences"},"R\xe9f\xe9rences"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"React Docs \u2013 useRef: ",(0,r.kt)("a",{parentName:"li",href:"https://react.dev/reference/react/useRef"},"https://react.dev/reference/react/useRef")),(0,r.kt)("li",{parentName:"ul"},"React Docs \u2013 useCallback: ",(0,r.kt)("a",{parentName:"li",href:"https://react.dev/reference/react/useCallback"},"https://react.dev/reference/react/useCallback")),(0,r.kt)("li",{parentName:"ul"},"Chakra UI: ",(0,r.kt)("a",{parentName:"li",href:"https://chakra-ui.com/"},"https://chakra-ui.com/")),(0,r.kt)("li",{parentName:"ul"},"shadcn/ui: ",(0,r.kt)("a",{parentName:"li",href:"https://ui.shadcn.com/"},"https://ui.shadcn.com/"))))}p.isMDXComponent=!0}}]);