"use strict";(self.webpackChunklazone_learning_path=self.webpackChunklazone_learning_path||[]).push([[2544],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,f=d["".concat(o,".").concat(m)]||d[m]||p[m]||l;return n?a.createElement(f,s(s({ref:t},c),{},{components:n})):a.createElement(f,s({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,s=new Array(l);s[0]=m;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[d]="string"==typeof e?e:r,s[1]=i;for(var u=2;u<l;u++)s[u]=n[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9042:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const l={},s="Ma\xeetrise du State et des Effets",i={unversionedId:"fullstack-learning-path/module-0-react-fondamentaux/state-effets",id:"fullstack-learning-path/module-0-react-fondamentaux/state-effets",title:"Ma\xeetrise du State et des Effets",description:"Objectifs d'apprentissage",source:"@site/docs/fullstack-learning-path/module-0-react-fondamentaux/02-state-effets.md",sourceDirName:"fullstack-learning-path/module-0-react-fondamentaux",slug:"/fullstack-learning-path/module-0-react-fondamentaux/state-effets",permalink:"/lazone-training-path-docs/en/docs/next/fullstack-learning-path/module-0-react-fondamentaux/state-effets",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/fullstack-learning-path/module-0-react-fondamentaux/02-state-effets.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Le c\u0153ur de React (Composants et Rendu)",permalink:"/lazone-training-path-docs/en/docs/next/fullstack-learning-path/module-0-react-fondamentaux/coeur-de-react"},next:{title:"Hooks avanc\xe9s et Projet To\u2011Do",permalink:"/lazone-training-path-docs/en/docs/next/fullstack-learning-path/module-0-react-fondamentaux/hooks-avances-todo"}},o={},u=[{value:"Objectifs d&#39;apprentissage",id:"objectifs-dapprentissage",level:2},{value:"Plan",id:"plan",level:2},{value:"Concepts cl\xe9s",id:"concepts-cl\xe9s",level:2},{value:"Gestion d\u2019\xe9v\xe9nements et formulaires contr\xf4l\xe9s",id:"gestion-d\xe9v\xe9nements-et-formulaires-contr\xf4l\xe9s",level:3},{value:"Listes, cl\xe9s et rendu conditionnel",id:"listes-cl\xe9s-et-rendu-conditionnel",level:3},{value:"useEffect: effets de bord, d\xe9pendances et nettoyage",id:"useeffect-effets-de-bord-d\xe9pendances-et-nettoyage",level:3},{value:"Pratique",id:"pratique",level:2},{value:"Contr\xf4le",id:"contr\xf4le",level:2},{value:"Voir aussi",id:"voir-aussi",level:2},{value:"R\xe9f\xe9rences",id:"r\xe9f\xe9rences",level:2}],c={toc:u},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"ma\xeetrise-du-state-et-des-effets"},"Ma\xeetrise du State et des Effets"),(0,r.kt)("h2",{id:"objectifs-dapprentissage"},"Objectifs d'apprentissage"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Comprendre la diff\xe9rence entre variable locale et \xe9tat React"),(0,r.kt)("li",{parentName:"ul"},"Ma\xeetriser ",(0,r.kt)("inlineCode",{parentName:"li"},"useState")," (mise \xe0 jour asynchrone, mises \xe0 jour fonctionnelles, batching)"),(0,r.kt)("li",{parentName:"ul"},"G\xe9rer les \xe9v\xe9nements et formulaires contr\xf4l\xe9s"),(0,r.kt)("li",{parentName:"ul"},"Rendre des listes avec des cl\xe9s stables et \xe9viter les pi\xe8ges"),(0,r.kt)("li",{parentName:"ul"},"Utiliser ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect")," pour les effets de bord (d\xe9pendances, nettoyage)")),(0,r.kt)("h2",{id:"plan"},"Plan"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useState")," et mise \xe0 jour asynchrone"),(0,r.kt)("li",{parentName:"ul"},"Gestion d\u2019\xe9v\xe9nements et formulaires contr\xf4l\xe9s"),(0,r.kt)("li",{parentName:"ul"},"Listes, cl\xe9s et rendu conditionnel")),(0,r.kt)("h2",{id:"concepts-cl\xe9s"},"Concepts cl\xe9s"),(0,r.kt)("p",null,"L\u2019\xab \xe9tat \xbb (state) est une donn\xe9e qui d\xe9clenche un re-rendu lorsqu\u2019elle change via son setter. Une simple variable locale ne d\xe9clenche pas de re-rendu."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useState } from "react"\n\nexport default function Counter() {\n  // D\xe9clare un \xe9tat avec valeur initiale 0\n  const [count, setCount] = useState(0)\n\n  function inc() {\n    // Les mises \xe0 jour peuvent \xeatre regroup\xe9es (batching)\n    setCount((c) => c + 1) // mise \xe0 jour fonctionnelle s\xfbre\n  }\n\n  return (\n    <button onClick={inc}>Compteur: {count}</button>\n  )\n}\n')),(0,r.kt)("p",null,"Points importants:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Les mises \xe0 jour d\u2019\xe9tat sont asynchrones et peuvent \xeatre batch\xe9es."),(0,r.kt)("li",{parentName:"ul"},"Utiliser la forme fonctionnelle ",(0,r.kt)("inlineCode",{parentName:"li"},"setCount(prev => ...)")," quand la nouvelle valeur d\xe9pend de l\u2019ancienne."),(0,r.kt)("li",{parentName:"ul"},"Ne jamais muter directement des objets/arrays d\u2019\xe9tat (utiliser la copie immuable).")),(0,r.kt)("h3",{id:"gestion-d\xe9v\xe9nements-et-formulaires-contr\xf4l\xe9s"},"Gestion d\u2019\xe9v\xe9nements et formulaires contr\xf4l\xe9s"),(0,r.kt)("p",null,"Un \xab formulaire contr\xf4l\xe9 \xbb stocke la valeur dans l\u2019\xe9tat du composant."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useState } from "react"\n\nexport default function LoginForm() {\n  const [email, setEmail] = useState("")\n  const [password, setPassword] = useState("")\n\n  function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    // Utiliser les valeurs d\u2019\xe9tat ici\n    // TODO: appeler une API ou valider\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        Email\n        <input value={email} onChange={(e) => setEmail(e.target.value)} />\n      </label>\n      <label>\n        Mot de passe\n        <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} />\n      </label>\n      <button type="submit">Se connecter</button>\n    </form>\n  )\n}\n')),(0,r.kt)("h3",{id:"listes-cl\xe9s-et-rendu-conditionnel"},"Listes, cl\xe9s et rendu conditionnel"),(0,r.kt)("p",null,"Les cl\xe9s doivent \xeatre stables et uniques par \xe9l\xe9ment fr\xe8re pour aider la r\xe9conciliation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"type Todo = { id: string; title: string }\n\nfunction TodoList({ items }: { items: Todo[] }) {\n  if (items.length === 0) return <p>Aucune t\xe2che</p>\n  return (\n    <ul>\n      {items.map((it) => (\n        <li key={it.id}>{it.title}</li> // Eviter key={index}\n      ))}\n    </ul>\n  )\n}\n")),(0,r.kt)("p",null,"Pi\xe8ges courants:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Utiliser ",(0,r.kt)("inlineCode",{parentName:"li"},"index")," comme ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," peut provoquer un \xe9tat incorrect lors des insertions/suppressions."),(0,r.kt)("li",{parentName:"ul"},"Muter le tableau (ex: ",(0,r.kt)("inlineCode",{parentName:"li"},"array.push"),") au lieu de cr\xe9er une copie (",(0,r.kt)("inlineCode",{parentName:"li"},"setTodos(prev => [...prev, x])"),").")),(0,r.kt)("h3",{id:"useeffect-effets-de-bord-d\xe9pendances-et-nettoyage"},"useEffect: effets de bord, d\xe9pendances et nettoyage"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useEffect")," s\u2019ex\xe9cute apr\xe8s le rendu. D\xe9clarer les d\xe9pendances n\xe9cessaires dans le tableau pour \xe9viter les incoh\xe9rences ou boucles infinies."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useEffect, useState } from "react"\n\nexport default function Users() {\n  const [users, setUsers] = useState<Array<{ id: number; name: string }>>([])\n\n  useEffect(() => {\n    let abort = new AbortController()\n    async function load() {\n      try {\n        const res = await fetch("/api/users", { signal: abort.signal })\n        const data = await res.json()\n        setUsers(data)\n      } catch (e) {\n        // Ignorer les erreurs d\u2019abandon\n      }\n    }\n    load()\n    return () => {\n      // Nettoyage: annuler la requ\xeate si le composant se d\xe9monte\n      abort.abort()\n    }\n  }, []) // d\xe9pendances: vide = lors du montage seulement\n\n  return <pre>{JSON.stringify(users, null, 2)}</pre>\n}\n')),(0,r.kt)("p",null,"Bonnes pratiques:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"D\xe9clarer toutes les d\xe9pendances utilis\xe9es dans l\u2019effet (ou extraire la logique pure)."),(0,r.kt)("li",{parentName:"ul"},"Nettoyer les abonnements, timers, listeners dans la fonction de retour."),(0,r.kt)("li",{parentName:"ul"},"Garder les effets focalis\xe9s sur les effets de bord; la logique de calcul pur reste hors effet.")),(0,r.kt)("h2",{id:"pratique"},"Pratique"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Impl\xe9menter: compteur, toggle, formulaire contr\xf4l\xe9 (email/password)."),(0,r.kt)("li",{parentName:"ul"},"Rendre une liste de t\xe2ches avec ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," stable; ajouter/supprimer de mani\xe8re immuable."),(0,r.kt)("li",{parentName:"ul"},"\xc9crire un composant qui fetch des donn\xe9es une fois au montage avec ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect")," et annulation.")),(0,r.kt)("h2",{id:"contr\xf4le"},"Contr\xf4le"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Quiz rapide: diff\xe9rence variable vs \xe9tat; quand utiliser la mise \xe0 jour fonctionnelle; dangers de ",(0,r.kt)("inlineCode",{parentName:"li"},"key=index"),"."),(0,r.kt)("li",{parentName:"ul"},"Identifier les d\xe9pendances manquantes d\u2019un effet et proposer la correction.")),(0,r.kt)("h2",{id:"voir-aussi"},"Voir aussi"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/lazone-training-path-docs/en/docs/next/fullstack-learning-path/module-0-react-fondamentaux/coeur-de-react"},"Le c\u0153ur de React")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/lazone-training-path-docs/en/docs/next/fullstack-learning-path/module-2/methodes-rendu-nextjs"},"Ma\xeetriser les m\xe9thodes de rendu"))),(0,r.kt)("h2",{id:"r\xe9f\xe9rences"},"R\xe9f\xe9rences"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"React Docs \u2013 useState: ",(0,r.kt)("a",{parentName:"li",href:"https://react.dev/reference/react/useState"},"https://react.dev/reference/react/useState")),(0,r.kt)("li",{parentName:"ul"},"React Docs \u2013 useEffect: ",(0,r.kt)("a",{parentName:"li",href:"https://react.dev/reference/react/useEffect"},"https://react.dev/reference/react/useEffect")),(0,r.kt)("li",{parentName:"ul"},"Chakra UI: ",(0,r.kt)("a",{parentName:"li",href:"https://chakra-ui.com/"},"https://chakra-ui.com/")),(0,r.kt)("li",{parentName:"ul"},"shadcn/ui: ",(0,r.kt)("a",{parentName:"li",href:"https://ui.shadcn.com/"},"https://ui.shadcn.com/"))))}p.isMDXComponent=!0}}]);