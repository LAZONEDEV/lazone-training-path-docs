"use strict";(self.webpackChunklazone_learning_path=self.webpackChunklazone_learning_path||[]).push([[4145],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,k=c["".concat(o,".").concat(m)]||c[m]||d[m]||l;return n?a.createElement(k,s(s({ref:t},u),{},{components:n})):a.createElement(k,s({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,s=new Array(l);s[0]=m;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[c]="string"==typeof e?e:r,s[1]=i;for(var p=2;p<l;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},219:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const l={},s="Les bases des monorepos: avantages et cas d'utilisation",i={unversionedId:"fullstack-learning-path/module-1/monorepos-basics",id:"fullstack-learning-path/module-1/monorepos-basics",title:"Les bases des monorepos: avantages et cas d'utilisation",description:"Cette section explore les concepts fondamentaux des monorepos, leurs avantages et les sc\xe9narios o\xf9 ils sont particuli\xe8rement utiles.",source:"@site/docs/fullstack-learning-path/module-1/03-monorepos-basics.md",sourceDirName:"fullstack-learning-path/module-1",slug:"/fullstack-learning-path/module-1/monorepos-basics",permalink:"/lazone-training-path-docs/docs/next/fullstack-learning-path/module-1/monorepos-basics",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/fullstack-learning-path/module-1/03-monorepos-basics.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Mise en place d'un environnement de d\xe9veloppement avec Docker",permalink:"/lazone-training-path-docs/docs/next/fullstack-learning-path/module-1/environnement-docker"},next:{title:"Module 2: NextJS et \xe9cosyst\xe8me React avanc\xe9",permalink:"/lazone-training-path-docs/docs/next/category/module-2-nextjs-et-\xe9cosyst\xe8me-react-avanc\xe9"}},o={},p=[{value:"Objectifs d&#39;apprentissage",id:"objectifs-dapprentissage",level:2},{value:"Plan du cours",id:"plan-du-cours",level:2},{value:"Concepts cl\xe9s",id:"concepts-cl\xe9s",level:2},{value:"Outils et technologies",id:"outils-et-technologies",level:2},{value:"pnpm workspaces (ou Yarn workspaces)",id:"pnpm-workspaces-ou-yarn-workspaces",level:3},{value:"Turborepo (bases)",id:"turborepo-bases",level:3},{value:"Nx (mention)",id:"nx-mention",level:3},{value:"Structure de projet (exemple)",id:"structure-de-projet-exemple",level:2},{value:"Exemples de packages",id:"exemples-de-packages",level:3},{value:"Gestion des d\xe9pendances",id:"gestion-des-d\xe9pendances",level:2},{value:"CI/CD dans un monorepo",id:"cicd-dans-un-monorepo",level:2},{value:"Bonnes pratiques",id:"bonnes-pratiques",level:2},{value:"Pi\xe8ges courants",id:"pi\xe8ges-courants",level:2},{value:"Pratique",id:"pratique",level:2},{value:"Contr\xf4le",id:"contr\xf4le",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"les-bases-des-monorepos-avantages-et-cas-dutilisation"},"Les bases des monorepos: avantages et cas d'utilisation"),(0,r.kt)("p",null,"Cette section explore les concepts fondamentaux des monorepos, leurs avantages et les sc\xe9narios o\xf9 ils sont particuli\xe8rement utiles."),(0,r.kt)("h2",{id:"objectifs-dapprentissage"},"Objectifs d'apprentissage"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Comprendre le concept de monorepo"),(0,r.kt)("li",{parentName:"ul"},"Identifier les avantages et les d\xe9fis des monorepos"),(0,r.kt)("li",{parentName:"ul"},"Ma\xeetriser les outils et pratiques pour g\xe9rer efficacement un monorepo")),(0,r.kt)("h2",{id:"plan-du-cours"},"Plan du cours"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Introduction aux monorepos"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"D\xe9finition et concepts cl\xe9s"),(0,r.kt)("li",{parentName:"ul"},"Comparaison avec les multi-repos"),(0,r.kt)("li",{parentName:"ul"},"Cas d'utilisation typiques"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Outils et technologies"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Gestionnaires de packages (pnpm, Yarn workspaces)"),(0,r.kt)("li",{parentName:"ul"},"Outils de build (Turborepo, Nx)"),(0,r.kt)("li",{parentName:"ul"},"Gestion des d\xe9pendances"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Bonnes pratiques"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Structure de projet"),(0,r.kt)("li",{parentName:"ul"},"Gestion des versions"),(0,r.kt)("li",{parentName:"ul"},"CI/CD dans un monorepo"),(0,r.kt)("li",{parentName:"ul"},"Strat\xe9gies de test")))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"concepts-cl\xe9s"},"Concepts cl\xe9s"),(0,r.kt)("p",null,"Un monorepo regroupe plusieurs applications et biblioth\xe8ques dans un ",(0,r.kt)("strong",{parentName:"p"},"seul d\xe9p\xf4t"),", avec des d\xe9pendances partag\xe9es et des workflows unifi\xe9s. L\u2019objectif est de favoriser la ",(0,r.kt)("strong",{parentName:"p"},"r\xe9utilisabilit\xe9"),", la ",(0,r.kt)("strong",{parentName:"p"},"coh\xe9rence")," et la ",(0,r.kt)("strong",{parentName:"p"},"vitesse de d\xe9veloppement")," (caching, builds incr\xe9mentaux)."),(0,r.kt)("p",null,"Comparaison rapide:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Monorepo: un d\xe9p\xf4t, visibilit\xe9 globale, factorisation facilit\xe9e, tooling plus sophistiqu\xe9."),(0,r.kt)("li",{parentName:"ul"},"Multi\u2011repo: d\xe9p\xf4ts s\xe9par\xe9s, isolation forte, versions ind\xe9pendantes mais coordination plus co\xfbteuse.")),(0,r.kt)("p",null,"Cas d\u2019usage typiques:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Plusieurs apps (web, admin) partageant des librairies internes."),(0,r.kt)("li",{parentName:"ul"},"Design system partag\xe9 (UI) et packages utilitaires (auth, api, validation).")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"outils-et-technologies"},"Outils et technologies"),(0,r.kt)("h3",{id:"pnpm-workspaces-ou-yarn-workspaces"},"pnpm workspaces (ou Yarn workspaces)"),(0,r.kt)("p",null,"D\xe9clarer les workspaces au niveau racine pour lier apps et packages entre eux."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'// package.json (racine)\n{\n  "name": "acme-monorepo",\n  "private": true,\n  "workspaces": [\n    "apps/*",\n    "packages/*"\n  ],\n  "scripts": {\n    "build": "turbo run build",\n    "dev": "turbo run dev --parallel",\n    "test": "turbo run test"\n  }\n}\n')),(0,r.kt)("p",null,"Commentaires:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"private: true")," emp\xeache la publication du root."),(0,r.kt)("li",{parentName:"ul"},"Les routes ",(0,r.kt)("inlineCode",{parentName:"li"},"apps/*")," et ",(0,r.kt)("inlineCode",{parentName:"li"},"packages/*")," structurent la repo."),(0,r.kt)("li",{parentName:"ul"},"Les scripts d\xe9l\xe8guent \xe0 Turborepo (ou Nx) la coordination.")),(0,r.kt)("h3",{id:"turborepo-bases"},"Turborepo (bases)"),(0,r.kt)("p",null,"Turborepo orchestre les pipelines (build/dev/test), g\xe8re le cache et les d\xe9pendances inter\u2011packages."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'// turbo.json (racine)\n{\n  "$schema": "https://turbo.build/schema.json",\n  "pipeline": {\n    "build": {\n      "dependsOn": ["^build"],\n      "outputs": ["dist/**", ".next/**"]\n    },\n    "dev": {\n      "cache": false\n    },\n    "test": {}\n  }\n}\n')),(0,r.kt)("p",null,"Commentaires:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'dependsOn: ["^build"]')," ex\xe9cute le build des d\xe9pendances avant celui du package courant."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"outputs")," d\xe9crit ce qui est mis en cache (ex: ",(0,r.kt)("inlineCode",{parentName:"li"},".next")," ou ",(0,r.kt)("inlineCode",{parentName:"li"},"dist"),").")),(0,r.kt)("h3",{id:"nx-mention"},"Nx (mention)"),(0,r.kt)("p",null,"Nx propose des fonctionnalit\xe9s comparables (graph de d\xe9pendances, cache, g\xe9n\xe9rateurs). Choix selon pr\xe9f\xe9rence d\u2019\xe9quipe et \xe9cosyst\xe8me."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"structure-de-projet-exemple"},"Structure de projet (exemple)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"apps/\n  web/            # Next.js app\n  admin/          # Autre app\npackages/\n  ui/             # Design system interne\n  config/         # Config partag\xe9e (eslint, tsconfig)\n  utils/          # Utilitaires (formatage, fetch, validation)\npackage.json\nturbo.json\npnpm-lock.yaml | yarn.lock\n")),(0,r.kt)("h3",{id:"exemples-de-packages"},"Exemples de packages"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'// packages/ui/package.json\n{\n  "name": "@acme/ui",\n  "version": "0.1.0",\n  "main": "dist/index.js",\n  "types": "dist/index.d.ts",\n  "scripts": {\n    "build": "tsup src/index.ts --dts --format cjs,esm",\n    "dev": "tsup src/index.ts --watch"\n  }\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'// apps/web/package.json\n{\n  "name": "web",\n  "private": true,\n  "scripts": {\n    "dev": "next dev",\n    "build": "next build",\n    "start": "next start",\n    "lint": "next lint"\n  },\n  "dependencies": {\n    "@acme/ui": "workspace:*"\n  }\n}\n')),(0,r.kt)("p",null,"Commentaires:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"workspace:*")," permet de lier la version du package localement."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tsup")," n\u2019est qu\u2019un exemple de bundler rapide pour packages TS.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"gestion-des-d\xe9pendances"},"Gestion des d\xe9pendances"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Pr\xe9f\xe9rer des versions align\xe9es pour \xe9viter les duplications (ex: React unique)."),(0,r.kt)("li",{parentName:"ul"},"Promouvoir les d\xe9pendances communes au root si partag\xe9es massivement (avec prudence)."),(0,r.kt)("li",{parentName:"ul"},"Utiliser le protocole ",(0,r.kt)("inlineCode",{parentName:"li"},"workspace:")," pour pointer vers les packages internes.")),(0,r.kt)("h2",{id:"cicd-dans-un-monorepo"},"CI/CD dans un monorepo"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Mettre en cache les dossiers de build (",(0,r.kt)("inlineCode",{parentName:"li"},".next"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"dist"),") entre jobs."),(0,r.kt)("li",{parentName:"ul"},"N\u2019ex\xe9cuter que ce qui a chang\xe9 (graph Turborepo/Nx)."),(0,r.kt)("li",{parentName:"ul"},"Publier les packages versionn\xe9s (changesets) si besoin de distribution.")),(0,r.kt)("h2",{id:"bonnes-pratiques"},"Bonnes pratiques"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Bounded contexts"),": \xe9viter des packages fourre\u2011tout; responsabilit\xe9s claires."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"API stables")," pour les packages (types TS stricts, changelog/semver)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Tests par package")," + e2e par app."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Lint/format")," unifi\xe9s via ",(0,r.kt)("inlineCode",{parentName:"li"},"packages/config"),".")),(0,r.kt)("h2",{id:"pi\xe8ges-courants"},"Pi\xe8ges courants"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Couplage circulaire entre packages."),(0,r.kt)("li",{parentName:"ul"},"Propager des d\xe9pendances lourdes inutilement dans tous les packages."),(0,r.kt)("li",{parentName:"ul"},"M\xe9langer runtime serveur/client dans un m\xeame package sans garde\u2011fou.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"pratique"},"Pratique"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Initialiser un monorepo avec ",(0,r.kt)("inlineCode",{parentName:"li"},"apps/web")," (Next.js) et ",(0,r.kt)("inlineCode",{parentName:"li"},"packages/ui")," (lib TS) + Turborepo."),(0,r.kt)("li",{parentName:"ul"},"Consommer ",(0,r.kt)("inlineCode",{parentName:"li"},"@acme/ui")," dans ",(0,r.kt)("inlineCode",{parentName:"li"},"apps/web")," et mettre en place ",(0,r.kt)("inlineCode",{parentName:"li"},"dev"),"/",(0,r.kt)("inlineCode",{parentName:"li"},"build")," orchestr\xe9s.")),(0,r.kt)("h2",{id:"contr\xf4le"},"Contr\xf4le"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Expliquer le r\xf4le de ",(0,r.kt)("inlineCode",{parentName:"li"},"workspace:*")," et l\u2019int\xe9r\xeat du cache Turborepo."),(0,r.kt)("li",{parentName:"ul"},"D\xe9crire 3 risques fr\xe9quents dans un monorepo et comment les \xe9viter.")))}d.isMDXComponent=!0}}]);