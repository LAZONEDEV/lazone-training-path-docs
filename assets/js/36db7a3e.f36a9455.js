"use strict";(self.webpackChunklazone_learning_path=self.webpackChunklazone_learning_path||[]).push([[9465],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=u(n),m=a,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||l;return n?r.createElement(h,i(i({ref:t},c),{},{components:n})):r.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:a,i[1]=o;for(var u=2;u<l;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9867:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const l={},i="Gestion d\u2019\xc9tat Global avec Context API",o={unversionedId:"fullstack-learning-path/module-3-architecture-etat-global/context-etat-global",id:"fullstack-learning-path/module-3-architecture-etat-global/context-etat-global",title:"Gestion d\u2019\xc9tat Global avec Context API",description:"Objectifs d'apprentissage",source:"@site/docs/fullstack-learning-path/module-3-architecture-etat-global/02-context-etat-global.md",sourceDirName:"fullstack-learning-path/module-3-architecture-etat-global",slug:"/fullstack-learning-path/module-3-architecture-etat-global/context-etat-global",permalink:"/lazone-training-path-docs/docs/next/fullstack-learning-path/module-3-architecture-etat-global/context-etat-global",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/fullstack-learning-path/module-3-architecture-etat-global/02-context-etat-global.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"R\xe9utilisabilit\xe9 et Architecture",permalink:"/lazone-training-path-docs/docs/next/fullstack-learning-path/module-3-architecture-etat-global/reutilisabilite-architecture"},next:{title:"Module 4: Backend API",permalink:"/lazone-training-path-docs/docs/next/category/module-4-backend-api"}},s={},u=[{value:"Objectifs d&#39;apprentissage",id:"objectifs-dapprentissage",level:2},{value:"Plan",id:"plan",level:2},{value:"Concepts cl\xe9s",id:"concepts-cl\xe9s",level:2},{value:"D\xe9finir un contexte et un Provider",id:"d\xe9finir-un-contexte-et-un-provider",level:3},{value:"Consommer le contexte",id:"consommer-le-contexte",level:3},{value:"Plusieurs contextes et performance",id:"plusieurs-contextes-et-performance",level:3},{value:"Bonnes pratiques",id:"bonnes-pratiques",level:2},{value:"Pi\xe8ges courants",id:"pi\xe8ges-courants",level:2},{value:"Pratique",id:"pratique",level:2},{value:"Contr\xf4le",id:"contr\xf4le",level:2},{value:"Voir aussi",id:"voir-aussi",level:2},{value:"R\xe9f\xe9rences",id:"r\xe9f\xe9rences",level:2}],c={toc:u},p="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"gestion-d\xe9tat-global-avec-context-api"},"Gestion d\u2019\xc9tat Global avec Context API"),(0,a.kt)("h2",{id:"objectifs-dapprentissage"},"Objectifs d'apprentissage"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Limites du prop drilling"),(0,a.kt)("li",{parentName:"ul"},"Context API et fournisseurs multiples"),(0,a.kt)("li",{parentName:"ul"},"Th\xe8me Light/Dark via contexte")),(0,a.kt)("h2",{id:"plan"},"Plan"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Cr\xe9ation d\u2019un ",(0,a.kt)("inlineCode",{parentName:"li"},"ThemeContext")),(0,a.kt)("li",{parentName:"ul"},"Consommation du contexte dans plusieurs composants"),(0,a.kt)("li",{parentName:"ul"},"Comparaison \xe9tat local vs global")),(0,a.kt)("h2",{id:"concepts-cl\xe9s"},"Concepts cl\xe9s"),(0,a.kt)("p",null,"Le \xab prop drilling \xbb survient quand on transmet des props \xe0 travers de nombreux niveaux alors qu\u2019un composant profond seul en a besoin. La Context API fournit une mani\xe8re de partager une valeur \xe0 l\u2019arborescence sans passer explicitement des props."),(0,a.kt)("h3",{id:"d\xe9finir-un-contexte-et-un-provider"},"D\xe9finir un contexte et un Provider"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'// theme-context.tsx\nimport React, { createContext, useMemo, useState, useContext } from "react"\n\ntype Theme = "light" | "dark"\ntype ThemeContextValue = {\n  theme: Theme\n  setTheme: (t: Theme) => void\n  toggle: () => void\n}\n\nconst ThemeContext = createContext<ThemeContextValue | undefined>(undefined)\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<Theme>("light")\n  const value = useMemo(\n    () => ({ theme, setTheme, toggle: () => setTheme((t) => (t === "light" ? "dark" : "light")) }),\n    [theme]\n  )\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>\n}\n\nexport function useTheme() {\n  const ctx = useContext(ThemeContext)\n  if (!ctx) throw new Error("useTheme must be used within ThemeProvider")\n  return ctx\n}\n')),(0,a.kt)("p",null,"Notes importantes:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Initialiser le contexte \xe0 ",(0,a.kt)("inlineCode",{parentName:"li"},"undefined")," et lever une erreur dans un hook d\u2019acc\xe8s aide \xe0 d\xe9tecter l\u2019usage hors Provider."),(0,a.kt)("li",{parentName:"ul"},"M\xe9mo\xefser l\u2019objet ",(0,a.kt)("inlineCode",{parentName:"li"},"value")," avec ",(0,a.kt)("inlineCode",{parentName:"li"},"useMemo")," \xe9vite des re-rendus en cascade.")),(0,a.kt)("h3",{id:"consommer-le-contexte"},"Consommer le contexte"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useTheme } from "./theme-context"\n\nexport function ThemeSwitch() {\n  const { theme, toggle } = useTheme()\n  return (\n    <button onClick={toggle} aria-pressed={theme === "dark"}>\n      {theme === "dark" ? "Mode sombre" : "Mode clair"}\n    </button>\n  )\n}\n')),(0,a.kt)("h3",{id:"plusieurs-contextes-et-performance"},"Plusieurs contextes et performance"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Spliter les contextes par domaine (th\xe8me, auth, locale) pour limiter les re-rendus."),(0,a.kt)("li",{parentName:"ul"},"\xc9viter de recr\xe9er un objet ",(0,a.kt)("inlineCode",{parentName:"li"},"value")," \xe0 chaque rendu: utiliser ",(0,a.kt)("inlineCode",{parentName:"li"},"useMemo")," et fonctions stables (",(0,a.kt)("inlineCode",{parentName:"li"},"useCallback"),")."),(0,a.kt)("li",{parentName:"ul"},"Ne pas placer dans le contexte des valeurs qui changent tr\xe8s souvent si non n\xe9cessaire.")),(0,a.kt)("h2",{id:"bonnes-pratiques"},"Bonnes pratiques"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Pr\xe9f\xe9rer l\u2019\xe9tat local pour des donn\xe9es strictement locales; r\xe9server le contexte \xe0 des donn\xe9es globales (th\xe8me, session, param\xe8tres)."),(0,a.kt)("li",{parentName:"ul"},"Exposer un hook ",(0,a.kt)("inlineCode",{parentName:"li"},"useXxx()")," au-dessus du contexte pour centraliser les garde-fous."),(0,a.kt)("li",{parentName:"ul"},"Taper strictement la valeur de contexte (TypeScript) pour une API claire.")),(0,a.kt)("h2",{id:"pi\xe8ges-courants"},"Pi\xe8ges courants"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Fournir ",(0,a.kt)("inlineCode",{parentName:"li"},"value={{ theme, setTheme }}")," inline sans ",(0,a.kt)("inlineCode",{parentName:"li"},"useMemo")," \u2192 re-rendus inutiles."),(0,a.kt)("li",{parentName:"ul"},"Empiler trop de Providers sans documentation \u2192 lisibilit\xe9 r\xe9duite (regrouper par domaine)."),(0,a.kt)("li",{parentName:"ul"},"Mettre dans le contexte des donn\xe9es d\xe9riv\xe9es faciles \xe0 recalculer localement.")),(0,a.kt)("h2",{id:"pratique"},"Pratique"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Projet Th\xe8me: switch, persistance, organisation des fichiers")),(0,a.kt)("h2",{id:"contr\xf4le"},"Contr\xf4le"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Discussion guid\xe9e sur quand utiliser le contexte")),(0,a.kt)("h2",{id:"voir-aussi"},"Voir aussi"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/lazone-training-path-docs/docs/next/fullstack-learning-path/module-3-architecture-etat-global/reutilisabilite-architecture"},"R\xe9utilisabilit\xe9 et Architecture")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/lazone-training-path-docs/docs/next/fullstack-learning-path/module-2/methodes-rendu-nextjs"},"Ma\xeetriser les m\xe9thodes de rendu"))),(0,a.kt)("h2",{id:"r\xe9f\xe9rences"},"R\xe9f\xe9rences"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"React Docs \u2013 Context: ",(0,a.kt)("a",{parentName:"li",href:"https://react.dev/reference/react/Context"},"https://react.dev/reference/react/Context")),(0,a.kt)("li",{parentName:"ul"},"Chakra UI \u2013 Theming: ",(0,a.kt)("a",{parentName:"li",href:"https://chakra-ui.com/docs/styled-system/theme"},"https://chakra-ui.com/docs/styled-system/theme")),(0,a.kt)("li",{parentName:"ul"},"shadcn/ui \u2013 Theming: ",(0,a.kt)("a",{parentName:"li",href:"https://ui.shadcn.com/docs/theming"},"https://ui.shadcn.com/docs/theming"))))}d.isMDXComponent=!0}}]);